<Styles
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="clr-namespace:StabilityMatrix.Avalonia.Controls">

    <Style Selector="controls|ResourceUsageCircle">
        <Setter Property="Width" Value="40" />
        <Setter Property="Height" Value="40" />
        <Setter Property="TrackBrush" Value="{DynamicResource ControlStrokeColorDefaultBrush}" />
        <Setter Property="Template">
            <ControlTemplate>
                <Grid>
                    <!--  Background track circle using Ellipse  -->
                    <Ellipse
                        Fill="Transparent"
                        Stroke="{TemplateBinding TrackBrush}"
                        StrokeThickness="{TemplateBinding StrokeThickness}" />

                    <!--  Progress arc using the custom ProgressRing control  -->
                    <controls:ProgressRing
                        Background="Transparent"
                        EndAngle="360"
                        Foreground="{TemplateBinding IndicatorBrush}"
                        IsIndeterminate="False"
                        Maximum="{TemplateBinding Maximum}"
                        Minimum="0"
                        PreserveAspect="False"
                        StartAngle="0"
                        StrokeThickness="{TemplateBinding StrokeThickness}"
                        Value="{TemplateBinding Value}" />

                    <!--  Center content with label and value  -->
                    <StackPanel
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Spacing="-2">
                        <TextBlock
                            HorizontalAlignment="Center"
                            FontSize="8"
                            FontWeight="SemiBold"
                            Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                            Text="{TemplateBinding Label}" />
                        <TextBlock
                            HorizontalAlignment="Center"
                            FontSize="9"
                            FontWeight="Bold"
                            Foreground="{TemplateBinding IndicatorBrush}"
                            Text="{TemplateBinding ValueText}" />
                    </StackPanel>
                </Grid>
            </ControlTemplate>
        </Setter>
    </Style>

</Styles>
